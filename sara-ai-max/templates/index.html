<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sara AI Max - Web Interface</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%);
        color: #ffffff;
        height: 100vh;
        display: flex;
        flex-direction: column;
      }

      .header {
        background: #2d2d2d;
        padding: 20px 30px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      }

      .header h1 {
        font-size: 28px;
        color: #00ff88;
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .status {
        display: inline-block;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #00ff88;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      .container {
        flex: 1;
        display: flex;
        gap: 20px;
        padding: 20px;
        overflow: hidden;
      }

      .conversation-panel {
        flex: 2;
        background: #2d2d2d;
        border-radius: 15px;
        padding: 25px;
        display: flex;
        flex-direction: column;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      }

      .conversation-header {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 15px;
        color: #00ff88;
      }

      .conversation {
        flex: 1;
        overflow-y: auto;
        padding: 15px;
        background: #1e1e1e;
        border-radius: 10px;
        margin-bottom: 20px;
      }

      .message {
        margin-bottom: 15px;
        padding: 12px 15px;
        border-radius: 10px;
        animation: slideIn 0.3s ease;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .message.user {
        background: #00487733;
        border-left: 4px solid #00ccff;
      }

      .message.sara {
        background: #00553333;
        border-left: 4px solid #00ff88;
      }

      .message.error {
        background: #55222233;
        border-left: 4px solid #ff5555;
      }

      .message-sender {
        font-weight: bold;
        margin-bottom: 5px;
        font-size: 14px;
      }

      .user .message-sender {
        color: #00ccff;
      }
      .sara .message-sender {
        color: #00ff88;
      }
      .error .message-sender {
        color: #ff5555;
      }

      .message-text {
        font-size: 15px;
        line-height: 1.5;
      }

      .input-area {
        display: flex;
        gap: 10px;
      }

      #commandInput {
        flex: 1;
        padding: 15px 20px;
        background: #3d3d3d;
        border: 2px solid #4d4d4d;
        border-radius: 10px;
        color: #ffffff;
        font-size: 15px;
        outline: none;
        transition: all 0.3s;
      }

      #commandInput:focus {
        border-color: #00ff88;
        box-shadow: 0 0 0 3px rgba(0, 255, 136, 0.1);
      }

      .send-btn {
        padding: 15px 35px;
        background: linear-gradient(135deg, #00ff88, #00cc66);
        border: none;
        border-radius: 10px;
        color: #1e1e1e;
        font-weight: bold;
        font-size: 15px;
        cursor: pointer;
        transition: all 0.3s;
      }

      .send-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 255, 136, 0.3);
      }

      .send-btn:active {
        transform: translateY(0);
      }

      .send-btn:disabled {
        background: #4d4d4d;
        cursor: not-allowed;
        transform: none;
      }

      .sidebar {
        flex: 1;
        background: #2d2d2d;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      }

      .sidebar-title {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 20px;
        color: #00ff88;
      }

      .test-commands {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .test-btn {
        padding: 12px 18px;
        background: #3d3d3d;
        border: 2px solid #4d4d4d;
        border-radius: 10px;
        color: #ffffff;
        cursor: pointer;
        transition: all 0.3s;
        text-align: left;
        font-size: 14px;
      }

      .test-btn:hover {
        background: #4d4d4d;
        border-color: #00ff88;
        transform: translateX(5px);
      }

      .timestamp {
        font-size: 12px;
        color: #888888;
        margin-bottom: 3px;
      }

      ::-webkit-scrollbar {
        width: 8px;
      }

      ::-webkit-scrollbar-track {
        background: #1e1e1e;
        border-radius: 10px;
      }

      ::-webkit-scrollbar-thumb {
        background: #4d4d4d;
        border-radius: 10px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: #00ff88;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>
        <span class="status"></span>
        ü§ñ SARA AI MAX
      </h1>
    </div>

    <div class="container">
      <div class="conversation-panel">
        <div class="conversation-header">Conversation</div>
        <div class="conversation" id="conversation">
          <div class="message sara">
            <div class="timestamp">Just now</div>
            <div class="message-sender">Sara</div>
            <div class="message-text">
              Hello! I'm Sara AI Max. How can I help you today?
            </div>
          </div>
        </div>
        <div class="input-area">
          <input
            type="text"
            id="commandInput"
            placeholder="Type your command here..."
            autofocus
          />
          <button class="send-btn" onclick="sendCommand()">Send ‚û§</button>
        </div>
      </div>

      <div class="sidebar">
        <div class="sidebar-title">‚ö° Quick Test Commands</div>
        <div class="test-commands">
          <button class="test-btn" onclick="testCommand('what time is it')">
            ‚è∞ What time is it?
          </button>
          <button class="test-btn" onclick="testCommand('what is the date')">
            üìÖ What's the date?
          </button>
          <button class="test-btn" onclick="testCommand('system info')">
            üíª System info
          </button>
          <button
            class="test-btn"
            onclick="testCommand('search for Python tutorials')"
          >
            üîç Search Python
          </button>
          <button
            class="test-btn"
            onclick="testCommand('create folder named TestFolder')"
          >
            üìÅ Create folder
          </button>
          <button class="test-btn" onclick="testCommand('tell me a joke')">
            üòÑ Tell a joke
          </button>
        </div>
      </div>
    </div>

    <script>
      const conversation = document.getElementById("conversation");
      const input = document.getElementById("commandInput");

      // Handle Enter key
      input.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          sendCommand();
        }
      });

      function addMessage(sender, text, type = "sara") {
        const now = new Date();
        const time = now.toLocaleTimeString();

        const messageDiv = document.createElement("div");
        messageDiv.className = `message ${type}`;
        messageDiv.innerHTML = `
                <div class="timestamp">${time}</div>
                <div class="message-sender">${sender}</div>
                <div class="message-text">${text}</div>
            `;

        conversation.appendChild(messageDiv);
        conversation.scrollTop = conversation.scrollHeight;
      }

      function testCommand(cmd) {
        input.value = cmd;
        sendCommand();
      }

      async function sendCommand() {
        const command = input.value.trim();
        if (!command) return;

        // Add user message
        addMessage("You", command, "user");
        input.value = "";

        // Disable input while processing
        input.disabled = true;
        document.querySelector(".send-btn").disabled = true;

        try {
          const response = await fetch("/api/process", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ command }),
          });

          const data = await response.json();

          if (data.success) {
            addMessage("Sara", data.message, "sara");
          } else {
            addMessage("Error", data.error || "Something went wrong", "error");
          }
        } catch (error) {
          addMessage("Error", "Failed to connect to Sara AI Max", "error");
        } finally {
          // Re-enable input
          input.disabled = false;
          document.querySelector(".send-btn").disabled = false;
          input.focus();
        }
      }
    </script>
  </body>
</html>
